tag:
  - generation
  - svg
task: qrcode
# dataset_path: lm_eval.tasks.qrcode.qrcode_dataset #module, not clever, perhaps
# dataset_path: "tasks/qrcode/qrcode_dataset.json"
dataset_path: json
dataset_name: null
dataset_kwargs:
  data_files:
    train: lm_eval/tasks/qrcode/qrcode_dataset.json
    validation: lm_eval/tasks/qrcode/qrcode_dataset.json
output_type: generate_until
training_split: null
validation_split: validation
test_split: null

process_docs: !function utils.process_docs
doc_to_text: !function utils.get_text_from_doc
doc_to_target: !function utils.get_target_from_doc
generation_kwargs:
  until:
    - "</svg>"
  max_gen_toks: 8192
metric_list:
  - metric: !function utils.qrcode_accuracy
    name: qrcode_accuracy
    aggregation: mean
    higher_is_better: true
  - metric: !function utils.svg_validity
    name: svg_validity
    aggregation: mean
    higher_is_better: true
metadata:
  version: 1.0
  description: "Evaluates an LLM's ability to generate valid QR codes in SVG format"
